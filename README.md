# Simulator
機械語のシミュレータ

ビルドの仕方:

$ make bsim

使い方

$ ./bsim (filename)

ファイル名を書かない場合、binaryというファイルを読み込みます。
(違うディレクトリに置いてるファイルだとPRINTの動作が怪しいので、とりあえずは同じディレクトリに置いていただくのが無難です)

*PRINTによる出力は(filename)_outに出力されます。

*設定を変更するには、define.cを開いて該当する変数の値を書き換え、makeしなおしてください。

*ステップ実行も可能。define.cの変数mode_step=1にするか、コマンドラインで -s をつけてください。

$ ./bsim -s (filename)

命令を一つ実行する度に、入力を待つ。

n : 次の命令を実行

pr : 現在の汎用レジスタのうち、非ゼロのものを全て表示。

pr_bin (num) : 汎用レジスタ(num)番をバイナリで表示

pfr : 現在の浮動小数点レジスタのうち、非ゼロのものを全て表示。

pfr_bin (num) : 浮動小数点レジスタ(num)番をバイナリで表示

pip : 現在のIP(instruction pointer)を表示。

pm_int (num) : メモリの(num)番地をint型として表示。

pm_float (num) : メモリの(num)番地をfloat型として表示。

pm_bin (num) : メモリの(num)番地をバイナリで表示。

q : 終了


また、副産物として簡易バイナリ作成機/表示機を作成したので、需要があるか分かりませんがついでに上げておきます。

ビルドの仕方:(作成機/表示機)

$make wrbin

$make rdbin

使い方:(作成機)

$./wrbin (filename)

バイナリを8bitずつ入力してください(2進数以外には対応していません)。入力が7文字以下の場合は左詰めになります(例えば"101"と入力すると、10100000になる)。一度に9文字以上書いても9文字目以降は無視されます。

終了時は1文字目に0や1以外を書けばOK.

使い方:(表示機)

$./rdbin (filename)

いずれも、ファイル名を書かない場合はbinaryというファイルを開きます。

使用例:

$ ./wrbin testbin

10101010

11110000

11001100

00110011

11111110

q

$ ./rdbin testbin

10101010 11110000 11001100 00110011

11111110 




